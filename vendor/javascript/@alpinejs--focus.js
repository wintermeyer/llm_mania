// @alpinejs/focus@3.14.8 downloaded from https://ga.jspm.io/npm:@alpinejs/focus@3.14.8/dist/module.esm.js

var e=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"];var t=e.join(",");var n=typeof Element==="undefined";var r=n?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;var a=!n&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument};var o=function getCandidates2(e,n,a){var o=Array.prototype.slice.apply(e.querySelectorAll(t));n&&r.call(e,t)&&o.unshift(e);o=o.filter(a);return o};var i=function getCandidatesIteratively2(e,n,a){var o=[];var i=Array.from(e);while(i.length){var u=i.shift();if(u.tagName==="SLOT"){var s=u.assignedElements();var c=s.length?s:u.children;var l=getCandidatesIteratively2(c,true,a);a.flatten?o.push.apply(o,l):o.push({scope:u,candidates:l})}else{var d=r.call(u,t);d&&a.filter(u)&&(n||!e.includes(u))&&o.push(u);var f=u.shadowRoot||typeof a.getShadowRoot==="function"&&a.getShadowRoot(u);var v=!a.shadowRootFilter||a.shadowRootFilter(u);if(f&&v){var p=getCandidatesIteratively2(f===true?u.children:f.children,true,a);a.flatten?o.push.apply(o,p):o.push({scope:u,candidates:p})}else i.unshift.apply(i,u.children)}}return o};var u=function getTabindex2(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex};var s=function sortOrderedTabbables2(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex};var c=function isInput2(e){return e.tagName==="INPUT"};var l=function isHiddenInput2(e){return c(e)&&e.type==="hidden"};var d=function isDetailsWithSummary2(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some((function(e){return e.tagName==="SUMMARY"}));return t};var f=function getCheckedRadio2(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]};var v=function isTabbableRadio2(e){if(!e.name)return true;var t=e.form||a(e);var n=function queryRadios2(e){return t.querySelectorAll('input[type="radio"][name="'+e+'"]')};var r;if(typeof window!=="undefined"&&typeof window.CSS!=="undefined"&&typeof window.CSS.escape==="function")r=n(window.CSS.escape(e.name));else try{r=n(e.name)}catch(e){console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message);return false}var o=f(r,e.form);return!o||o===e};var p=function isRadio2(e){return c(e)&&e.type==="radio"};var b=function isNonTabbableRadio2(e){return p(e)&&!v(e)};var h=function isZeroArea2(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return n===0&&r===0};var m=function isHidden2(e,t){var n=t.displayCheck,o=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return true;var i=r.call(e,"details>summary:first-of-type");var u=i?e.parentElement:e;if(r.call(u,"details:not([open]) *"))return true;var s=a(e).host;var c=(s===null||s===void 0?void 0:s.ownerDocument.contains(s))||e.ownerDocument.contains(e);if(n&&n!=="full"){if(n==="non-zero-area")return h(e)}else{if(typeof o==="function"){var l=e;while(e){var d=e.parentElement;var f=a(e);if(d&&!d.shadowRoot&&o(d)===true)return h(e);e=e.assignedSlot?e.assignedSlot:d||f===e.ownerDocument?d:f.host}e=l}if(c)return!e.getClientRects().length}return false};var y=function isDisabledFromFieldset2(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName)){var t=e.parentElement;while(t){if(t.tagName==="FIELDSET"&&t.disabled){for(var n=0;n<t.children.length;n++){var a=t.children.item(n);if(a.tagName==="LEGEND")return!!r.call(t,"fieldset[disabled] *")||!a.contains(e)}return true}t=t.parentElement}}return false};var g=function isNodeMatchingSelectorFocusable2(e,t){return!(t.disabled||l(t)||m(t,e)||d(t)||y(t))};var w=function isNodeMatchingSelectorTabbable2(e,t){return!(b(t)||u(t)<0||!g(e,t))};var E=function isValidShadowRootTabbable2(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)};var S=function sortByOrder2(e){var t=[];var n=[];e.forEach((function(e,r){var a=!!e.scope;var o=a?e.scope:e;var i=u(o,a);var s=a?sortByOrder2(e.candidates):o;i===0?a?t.push.apply(t,s):t.push(o):n.push({documentOrder:r,tabIndex:i,item:e,isScope:a,content:s})}));return n.sort(s).reduce((function(e,t){t.isScope?e.push.apply(e,t.content):e.push(t.content);return e}),[]).concat(t)};var N=function tabbable2(e,t){t=t||{};var n;n=t.getShadowRoot?i([e],t.includeContainer,{filter:w.bind(null,t),flatten:false,getShadowRoot:t.getShadowRoot,shadowRootFilter:E}):o(e,t.includeContainer,w.bind(null,t));return S(n)};var O=function focusable2(e,t){t=t||{};var n;n=t.getShadowRoot?i([e],t.includeContainer,{filter:g.bind(null,t),flatten:true,getShadowRoot:t.getShadowRoot}):o(e,t.includeContainer,g.bind(null,t));return n};var F=function isTabbable2(e,n){n=n||{};if(!e)throw new Error("No node provided");return r.call(e,t)!==false&&w(n,e)};var T=e.concat("iframe").join(",");var I=function isFocusable2(e,t){t=t||{};if(!e)throw new Error("No node provided");return r.call(e,T)!==false&&g(t,e)};function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),true).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true}):e[t]=n;return e}var R=function(){var e=[];return{activateTrap:function activateTrap(t){if(e.length>0){var n=e[e.length-1];n!==t&&n.pause()}var r=e.indexOf(t);if(r===-1)e.push(t);else{e.splice(r,1);e.push(t)}},deactivateTrap:function deactivateTrap(t){var n=e.indexOf(t);n!==-1&&e.splice(n,1);e.length>0&&e[e.length-1].unpause()}}}();var k=function isSelectableInput2(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select==="function"};var A=function isEscapeEvent2(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27};var D=function isTabEvent2(e){return e.key==="Tab"||e.keyCode===9};var x=function delay2(e){return setTimeout(e,0)};var C=function findIndex2(e,t){var n=-1;e.every((function(e,r){if(t(e)){n=r;return false}return true}));return n};var L=function valueOrHandler2(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return typeof e==="function"?e.apply(void 0,n):e};var P=function getActualTarget2(e){return e.target.shadowRoot&&typeof e.composedPath==="function"?e.composedPath()[0]:e.target};var _=function createFocusTrap2(e,t){var n=(t===null||t===void 0?void 0:t.document)||document;var r=_objectSpread2({returnFocusOnDeactivate:true,escapeDeactivates:true,delayInitialFocus:true},t);var a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:false,paused:false,delayInitialFocusTimer:void 0};var o;var i=function getOption2(e,t,n){return e&&e[t]!==void 0?e[t]:r[n||t]};var u=function findContainerIndex2(e){return a.containerGroups.findIndex((function(t){var n=t.container,r=t.tabbableNodes;return n.contains(e)||r.find((function(t){return t===e}))}))};var s=function getNodeForOption2(e){var t=r[e];if(typeof t==="function"){for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];t=t.apply(void 0,o)}t===true&&(t=void 0);if(!t){if(t===void 0||t===false)return t;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var u=t;if(typeof t==="string"){u=n.querySelector(t);if(!u)throw new Error("`".concat(e,"` as selector refers to no known node"))}return u};var c=function getInitialFocusNode2(){var e=s("initialFocus");if(e===false)return false;if(e===void 0)if(u(n.activeElement)>=0)e=n.activeElement;else{var t=a.tabbableGroups[0];var r=t&&t.firstTabbableNode;e=r||s("fallbackFocus")}if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e};var l=function updateTabbableNodes2(){a.containerGroups=a.containers.map((function(e){var t=N(e,r.tabbableOptions);var n=O(e,r.tabbableOptions);return{container:e,tabbableNodes:t,focusableNodes:n,firstTabbableNode:t.length>0?t[0]:null,lastTabbableNode:t.length>0?t[t.length-1]:null,
/**
         * Finds the __tabbable__ node that follows the given node in the specified direction,
         *  in this container, if any.
         * @param {HTMLElement} node
         * @param {boolean} [forward] True if going in forward tab order; false if going
         *  in reverse.
         * @returns {HTMLElement|undefined} The next tabbable node, if any.
         */
nextTabbableNode:function nextTabbableNode(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];var a=n.findIndex((function(t){return t===e}));if(!(a<0))return t?n.slice(a+1).find((function(e){return F(e,r.tabbableOptions)})):n.slice(0,a).reverse().find((function(e){return F(e,r.tabbableOptions)}))}}}));a.tabbableGroups=a.containerGroups.filter((function(e){return e.tabbableNodes.length>0}));if(a.tabbableGroups.length<=0&&!s("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")};var d=function tryFocus2(e){if(e!==false&&e!==n.activeElement)if(e&&e.focus){e.focus({preventScroll:!!r.preventScroll});a.mostRecentlyFocusedNode=e;k(e)&&e.select()}else tryFocus2(c())};var f=function getReturnFocusNode2(e){var t=s("setReturnFocus",e);return t||t!==false&&e};var v=function checkPointerDown2(e){var t=P(e);u(t)>=0||(L(r.clickOutsideDeactivates,e)?o.deactivate({returnFocus:r.returnFocusOnDeactivate&&!I(t,r.tabbableOptions)}):L(r.allowOutsideClick,e)||e.preventDefault())};var p=function checkFocusIn2(e){var t=P(e);var n=u(t)>=0;if(n||t instanceof Document)n&&(a.mostRecentlyFocusedNode=t);else{e.stopImmediatePropagation();d(a.mostRecentlyFocusedNode||c())}};var b=function checkTab2(e){var t=P(e);l();var n=null;if(a.tabbableGroups.length>0){var o=u(t);var i=o>=0?a.containerGroups[o]:void 0;if(o<0)n=e.shiftKey?a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:a.tabbableGroups[0].firstTabbableNode;else if(e.shiftKey){var c=C(a.tabbableGroups,(function(e){var n=e.firstTabbableNode;return t===n}));c<0&&(i.container===t||I(t,r.tabbableOptions)&&!F(t,r.tabbableOptions)&&!i.nextTabbableNode(t,false))&&(c=o);if(c>=0){var f=c===0?a.tabbableGroups.length-1:c-1;var v=a.tabbableGroups[f];n=v.lastTabbableNode}}else{var p=C(a.tabbableGroups,(function(e){var n=e.lastTabbableNode;return t===n}));p<0&&(i.container===t||I(t,r.tabbableOptions)&&!F(t,r.tabbableOptions)&&!i.nextTabbableNode(t))&&(p=o);if(p>=0){var b=p===a.tabbableGroups.length-1?0:p+1;var h=a.tabbableGroups[b];n=h.firstTabbableNode}}}else n=s("fallbackFocus");if(n){e.preventDefault();d(n)}};var h=function checkKey2(e){if(A(e)&&L(r.escapeDeactivates,e)!==false){e.preventDefault();o.deactivate()}else D(e)&&b(e)};var m=function checkClick2(e){var t=P(e);if(!(u(t)>=0)&&!L(r.clickOutsideDeactivates,e)&&!L(r.allowOutsideClick,e)){e.preventDefault();e.stopImmediatePropagation()}};var y=function addListeners2(){if(a.active){R.activateTrap(o);a.delayInitialFocusTimer=r.delayInitialFocus?x((function(){d(c())})):d(c());n.addEventListener("focusin",p,true);n.addEventListener("mousedown",v,{capture:true,passive:false});n.addEventListener("touchstart",v,{capture:true,passive:false});n.addEventListener("click",m,{capture:true,passive:false});n.addEventListener("keydown",h,{capture:true,passive:false});return o}};var g=function removeListeners2(){if(a.active){n.removeEventListener("focusin",p,true);n.removeEventListener("mousedown",v,true);n.removeEventListener("touchstart",v,true);n.removeEventListener("click",m,true);n.removeEventListener("keydown",h,true);return o}};o={get active(){return a.active},get paused(){return a.paused},activate:function activate(e){if(a.active)return this;var t=i(e,"onActivate");var r=i(e,"onPostActivate");var o=i(e,"checkCanFocusTrap");o||l();a.active=true;a.paused=false;a.nodeFocusedBeforeActivation=n.activeElement;t&&t();var u=function finishActivation2(){o&&l();y();r&&r()};if(o){o(a.containers.concat()).then(u,u);return this}u();return this},deactivate:function deactivate(e){if(!a.active)return this;var t=_objectSpread2({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},e);clearTimeout(a.delayInitialFocusTimer);a.delayInitialFocusTimer=void 0;g();a.active=false;a.paused=false;R.deactivateTrap(o);var n=i(t,"onDeactivate");var u=i(t,"onPostDeactivate");var s=i(t,"checkCanReturnFocus");var c=i(t,"returnFocus","returnFocusOnDeactivate");n&&n();var l=function finishDeactivation2(){x((function(){c&&d(f(a.nodeFocusedBeforeActivation));u&&u()}))};if(c&&s){s(f(a.nodeFocusedBeforeActivation)).then(l,l);return this}l();return this},pause:function pause(){if(a.paused||!a.active)return this;a.paused=true;g();return this},unpause:function unpause(){if(!a.paused||!a.active)return this;a.paused=false;l();y();return this},updateContainerElements:function updateContainerElements(e){var t=[].concat(e).filter(Boolean);a.containers=t.map((function(e){return typeof e==="string"?n.querySelector(e):e}));a.active&&l();return this}};o.updateContainerElements(e);return o};function src_default(e){let t;let n;window.addEventListener("focusin",(()=>{t=n;n=document.activeElement}));e.magic("focus",(e=>{let r=e;return{__noscroll:false,__wrapAround:false,within(e){r=e;return this},withoutScrolling(){this.__noscroll=true;return this},noscroll(){this.__noscroll=true;return this},withWrapAround(){this.__wrapAround=true;return this},wrap(){return this.withWrapAround()},focusable(e){return I(e)},previouslyFocused(){return t},lastFocused(){return t},focused(){return n},focusables(){return Array.isArray(r)?r:O(r,{displayCheck:"none"})},all(){return this.focusables()},isFirst(e){let t=this.all();return t[0]&&t[0].isSameNode(e)},isLast(e){let t=this.all();return t.length&&t.slice(-1)[0].isSameNode(e)},getFirst(){return this.all()[0]},getLast(){return this.all().slice(-1)[0]},getNext(){let e=this.all();let t=document.activeElement;if(e.indexOf(t)!==-1)return this.__wrapAround&&e.indexOf(t)===e.length-1?e[0]:e[e.indexOf(t)+1]},getPrevious(){let e=this.all();let t=document.activeElement;if(e.indexOf(t)!==-1)return this.__wrapAround&&e.indexOf(t)===0?e.slice(-1)[0]:e[e.indexOf(t)-1]},first(){this.focus(this.getFirst())},last(){this.focus(this.getLast())},next(){this.focus(this.getNext())},previous(){this.focus(this.getPrevious())},prev(){return this.previous()},focus(e){e&&setTimeout((()=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","0");e.focus({preventScroll:this.__noscroll})}))}}}));e.directive("trap",e.skipDuringClone(((e,{expression:t,modifiers:n},{effect:r,evaluateLater:a,cleanup:o})=>{let i=a(t);let u=false;let s={escapeDeactivates:false,allowOutsideClick:true,fallbackFocus:()=>e};if(n.includes("noautofocus"))s.initialFocus=false;else{let t=e.querySelector("[autofocus]");t&&(s.initialFocus=t)}let c=_(e,s);let undoInert=()=>{};let undoDisableScrolling=()=>{};const releaseFocus=()=>{undoInert();undoInert=()=>{};undoDisableScrolling();undoDisableScrolling=()=>{};c.deactivate({returnFocus:!n.includes("noreturn")})};r((()=>i((t=>{if(u!==t){if(t&&!u){n.includes("noscroll")&&(undoDisableScrolling=disableScrolling());n.includes("inert")&&(undoInert=setInert(e));setTimeout((()=>{c.activate()}),15)}!t&&u&&releaseFocus();u=!!t}}))));o(releaseFocus)}),((e,{expression:t,modifiers:n},{evaluate:r})=>{n.includes("inert")&&r(t)&&setInert(e)})))}function setInert(e){let t=[];crawlSiblingsUp(e,(e=>{let n=e.hasAttribute("aria-hidden");e.setAttribute("aria-hidden","true");t.push((()=>n||e.removeAttribute("aria-hidden")))}));return()=>{while(t.length)t.pop()()}}function crawlSiblingsUp(e,t){!e.isSameNode(document.body)&&e.parentNode&&Array.from(e.parentNode.children).forEach((n=>{n.isSameNode(e)?crawlSiblingsUp(e.parentNode,t):t(n)}))}function disableScrolling(){let e=document.documentElement.style.overflow;let t=document.documentElement.style.paddingRight;let n=window.innerWidth-document.documentElement.clientWidth;document.documentElement.style.overflow="hidden";document.documentElement.style.paddingRight=`${n}px`;return()=>{document.documentElement.style.overflow=e;document.documentElement.style.paddingRight=t}}var G=src_default;
/*! Bundled license information:

tabbable/dist/index.esm.js:
  (*!
  * tabbable 5.3.3
  * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
  *)

focus-trap/dist/focus-trap.esm.js:
  (*!
  * focus-trap 6.9.4
  * @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
  *)
*/export{G as default,src_default as focus};

