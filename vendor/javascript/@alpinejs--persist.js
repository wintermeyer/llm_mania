// @alpinejs/persist@3.14.8 downloaded from https://ga.jspm.io/npm:@alpinejs/persist@3.14.8/dist/module.esm.js

function src_default(e){let persist=()=>{let t;let r;try{r=localStorage}catch(e){console.error(e);console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let t=new Map;r={getItem:t.get.bind(t),setItem:t.set.bind(t)}}return e.interceptor(((s,a,o,n,l)=>{let i=t||`_x_${n}`;let g=storageHas(i,r)?storageGet(i,r):s;o(g);e.effect((()=>{let e=a();storageSet(i,e,r);o(e)}));return g}),(e=>{e.as=r=>{t=r;return e},e.using=t=>{r=t;return e}}))};Object.defineProperty(e,"$persist",{get:()=>persist()});e.magic("persist",persist);e.persist=(t,{get:r,set:s},a=localStorage)=>{let o=storageHas(t,a)?storageGet(t,a):r();s(o);e.effect((()=>{let e=r();storageSet(t,e,a);s(e)}))}}function storageHas(e,t){return t.getItem(e)!==null}function storageGet(e,t){let r=t.getItem(e,t);if(r!==void 0)return JSON.parse(r)}function storageSet(e,t,r){r.setItem(e,JSON.stringify(t))}var e=src_default;export{e as default,src_default as persist};

